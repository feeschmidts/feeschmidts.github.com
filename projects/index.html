---
layout: default
title: Projects
---

<div class="grid">
  <div style="text-align: center">
    <div id="tag-buttons"></div>
  </div>
</div>
<div class="grid" style="text-align: center">
  <p>Showing <span class="active" style="font-size:23px"></span> of <span class="total" style="font-size:23px"></span> projects</p>
</div>

<div class="grid" id="projects">

  {% for project in site.data.projects %}
      <div class="span1of3 span2of4 span2of2 project" data-tag='["{{ project.datatags | join:'", "' }}"]'>
        <a href="{{ project.url }}">
          <img src="{{ project.img }}" width="100%" alt="{{ project.imgalt }}">
        </a>
        <h2 class="header__project">{{ project.name }}</h2>
        <p class="small">{{ project.categories | join:' | ' }}</p>
        <p>{{ project.description }}</p>
      </div>
  {% endfor %}

</div>

<!--Wouldn't be such a bad idea to move these into a .js file if possible -->

<script>
$(function() {
  var total = $('.project').length;
  $('span.total').text(total);
  var taglist = {};
  $('div.project').each(function() {
    var elem = $(this);
    var tags = elem.data("tag");
    if (tags.length) {
      $.each(tags, function() {
        if (!taglist[this])
          taglist[this] = [];
        taglist[this].push(elem);
      });
    }
  });
  var tagbuttons = $("#tag-buttons");
  $.each(taglist, function(tagname) {
    var button = $('<button class="btn" data-toggle="button">'+tagname+'</button>');
    button.data('tag', tagname);
    tagbuttons.append(button);
  });
  $('body').on('click', '#tag-buttons button', function() {
    var activebuttons = $('#tag-buttons button.active');
    var activetags = [];
    if (activebuttons.length) {
      // $('div.project').hide();
      activebuttons.each(function() {
        var tagname = $(this).data('tag');
        activetags.push(tagname);
      });
      // console.log(activetags);
      $('div.project').each(function() {
        var $this = $(this);
        var matched = $.grep($this.data('tag'), function(tagname) {
          return $.inArray(tagname, activetags) !== -1;
        });

        if (matched.length) {
            $this.addClass("active").show("fast");
        }
        else {
            $this.hide().removeClass("active");
        }
        // $(taglist[tagname]).first().show("fast", function showNext() {
        //   $(this).next().show("fast", showNext);
        // });
      });
    }
    else {
      $('div.project').addClass("active").show();
    }
    var active = $('.project.active').length;
    $('span.active').text(active);
  });
  $('#tag-buttons button').first().click();
});

!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");

// var divs = $("div.project").get().sort(function(){
//             return Math.round(Math.random())-0.5; //so we get the right +/- combo
//            }).slice(0,4);
// $(divs).appendTo(divs[0].parentNode).show();

</script>